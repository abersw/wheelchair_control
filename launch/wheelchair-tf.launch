<launch>

  <arg name="wheelchair_sim" default="false" />
  <arg name="publish_urdf" default="true" />
  <arg name="use_tf_static" default="true" />
  <param name="/use_sim_time" value="true" if="$(wheelchair_sim)" />

  <group if="$(arg publish_urdf)">
    <param name="robot_description" textfile="$(find wheelchair_description)/urdf/wheelchair_model_tof7.urdf" />
    <node name="joint_state_publisher" pkg="joint_state_publisher" type="joint_state_publisher" />
    <node name="robot_state_publisher" pkg="robot_state_publisher" type="robot_state_publisher" >
      <param name="use_tf_static" value="$(arg use_tf_static" />
    </node>
  </group>
  <rosparam param="base_frame_id">"base_footprint"</rosparam>

  <!--Global parameters-->
  <param name="/wheelchair_robot/param/mobilenet/confidence_threshold" type="double" value="0.5" />

  <!--mobilenet camera input-->
  <remap from="/wheelchair_robot/left_camera/image_raw" to="/wheelchair_robot/sensors/left_camera" if="$(wheelchair_sim)"/>
  <!--<remap from="/still_image_publisher/image_raw" to="/wheelchair_robot/sensors/left_camera" if="$(wheelchair_sim)"/>-->
  <remap from="/zed_node/left/image_rect_color" to="/wheelchair_robot/sensors/left_camera" unless="$(wheelchair_sim)"/>

  <!--pointcloud transformer - dacop package-->
  <remap from="/wheelchair_robot/depth_camera/depth/points" to="/wheelchair_robot/sensors/pointcloud" if="$(wheelchair_sim)"/>
  <remap from="/zed_node/left/image_rect_color" to="/wheelchair_robot/sensors/pointcloud" unless="$(wheelchair_sim)"/>

  <remap from="/different_topic" to="/needed_topic"/>

  <group if="$(arg wheelchair_sim)">
    <!--add simulation params here-->
    <!--mobilenet camera input-->
    <param name="/wheelchair_param/mobilenet/image_src" type="string" value="/wheelchair_robot/left_camera/image_raw" />
    <!--static image publisher-->
    <!--<param name="param/mobilenet/image_src" type="string" value="/still_image_publisher/image_raw" />-->

    <!--pointcloud transformer - dacop package-->
    <param name="/wheelchair_param/pointcloud_src" type="string" value="/wheelchair_robot/depth_camera/depth/points" />

    <!--Wheelchair cmd_vel driver-->
    <param name="/wheelchair_param/cmd_vel" type="string" value="/wheelchair_robot/cmd_vel" />

  </group>
  <group unless="$(arg wheelchair_sim)">
    <!--add physical params here-->
    <!--mobilenet camera input-->
    <param name="/wheelchair_param/mobilenet/image_src" type="string" value="/zed_node/left/image_rect_color" />

    <!--pointcloud transformer - dacop package-->
    <param name="/wheelchair_param/pointcloud_src" type="string" value="/zed_node/point_cloud/cloud_registered" />

    <!--Wheelchair cmd_vel driver-->
    <param name="/wheelchair_param/cmd_vel" type="string" value="/wheelchair_controller/cmd_vel" />
  </group>

</launch>
